<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Extracting raster fractions and area using a polygon mask | Intro to R for Forest Ecosystem Science</title>
  <meta name="description" content="Introductory R" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Extracting raster fractions and area using a polygon mask | Intro to R for Forest Ecosystem Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Introductory R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Extracting raster fractions and area using a polygon mask | Intro to R for Forest Ecosystem Science" />
  
  <meta name="twitter:description" content="Introductory R" />
  

<meta name="author" content="Anu Singh, Benjamin Wagner, and Kaitlyn Hammond" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="spatial-tools-for-forestry-and-ecological-applications.html"/>
<link rel="next" href="calculating-class-area-from-raster.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i><b>1.1</b> Disclaimer</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="a-few-words-on-a-productive-setup-and-workflow-in-r-with-r-studio.html"><a href="a-few-words-on-a-productive-setup-and-workflow-in-r-with-r-studio.html"><i class="fa fa-check"></i><b>2</b> A few words on a productive setup and workflow in <code>R</code> with <em>R-Studio</em></a>
<ul>
<li class="chapter" data-level="2.1" data-path="a-few-words-on-a-productive-setup-and-workflow-in-r-with-r-studio.html"><a href="a-few-words-on-a-productive-setup-and-workflow-in-r-with-r-studio.html#r-projects"><i class="fa fa-check"></i><b>2.1</b> R Projects</a></li>
<li class="chapter" data-level="2.2" data-path="a-few-words-on-a-productive-setup-and-workflow-in-r-with-r-studio.html"><a href="a-few-words-on-a-productive-setup-and-workflow-in-r-with-r-studio.html#setting-up-the-r-studio-user-interface"><i class="fa fa-check"></i><b>2.2</b> Setting up the R-Studio User interface</a></li>
<li class="chapter" data-level="2.3" data-path="a-few-words-on-a-productive-setup-and-workflow-in-r-with-r-studio.html"><a href="a-few-words-on-a-productive-setup-and-workflow-in-r-with-r-studio.html#code-folds-and-commenting"><i class="fa fa-check"></i><b>2.3</b> Code folds and commenting</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introducing-the-koala-dataset.html"><a href="introducing-the-koala-dataset.html"><i class="fa fa-check"></i><b>3</b> Introducing the koala dataset</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introducing-the-koala-dataset.html"><a href="introducing-the-koala-dataset.html#data-types-and-variable-types"><i class="fa fa-check"></i><b>3.1</b> <em>data types</em> and <em>variable types</em></a></li>
<li class="chapter" data-level="3.2" data-path="introducing-the-koala-dataset.html"><a href="introducing-the-koala-dataset.html#changing-variable-types"><i class="fa fa-check"></i><b>3.2</b> Changing <em>variable types</em></a></li>
<li class="chapter" data-level="3.3" data-path="introducing-the-koala-dataset.html"><a href="introducing-the-koala-dataset.html#how-the-koala-dataset-was-collated"><i class="fa fa-check"></i><b>3.3</b> How the koala dataset was collated</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="introducing-the-koala-dataset.html"><a href="introducing-the-koala-dataset.html#loading-the-raw-data"><i class="fa fa-check"></i><b>3.3.1</b> Loading the raw data</a></li>
<li class="chapter" data-level="3.3.2" data-path="introducing-the-koala-dataset.html"><a href="introducing-the-koala-dataset.html#adding-the-state-names-by-location"><i class="fa fa-check"></i><b>3.3.2</b> Adding the state names by location</a></li>
<li class="chapter" data-level="3.3.3" data-path="introducing-the-koala-dataset.html"><a href="introducing-the-koala-dataset.html#creating-dummy-data"><i class="fa fa-check"></i><b>3.3.3</b> Creating dummy data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><i class="fa fa-check"></i><b>4</b> <code>dplyr</code> - A brief introduction to tidy data manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#loading-and-checking-the-data"><i class="fa fa-check"></i><b>4.1</b> Loading and checking the data</a></li>
<li class="chapter" data-level="4.2" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#working-with-dplyr"><i class="fa fa-check"></i><b>4.2</b> Working with <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#select-and-dplyrs-pipe"><i class="fa fa-check"></i><b>4.2.1</b> select() and dplyr’s pipe</a></li>
<li class="chapter" data-level="4.2.2" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#filter"><i class="fa fa-check"></i><b>4.2.2</b> filter()</a></li>
<li class="chapter" data-level="4.2.3" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-1"><i class="fa fa-check"></i><b>4.2.3</b> Challenge 1</a></li>
<li class="chapter" data-level="4.2.4" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#group_by-and-summarise"><i class="fa fa-check"></i><b>4.2.4</b> group_by() and summarise()</a></li>
<li class="chapter" data-level="4.2.5" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-2"><i class="fa fa-check"></i><b>4.2.5</b> Challenge 2</a></li>
<li class="chapter" data-level="4.2.6" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#mutate"><i class="fa fa-check"></i><b>4.2.6</b> mutate()</a></li>
<li class="chapter" data-level="4.2.7" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-3"><i class="fa fa-check"></i><b>4.2.7</b> Challenge 3</a></li>
<li class="chapter" data-level="4.2.8" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#pivoting"><i class="fa fa-check"></i><b>4.2.8</b> Pivoting</a></li>
<li class="chapter" data-level="4.2.9" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-4"><i class="fa fa-check"></i><b>4.2.9</b> Challenge 4</a></li>
<li class="chapter" data-level="4.2.10" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-5"><i class="fa fa-check"></i><b>4.2.10</b> Challenge 5</a></li>
<li class="chapter" data-level="4.2.11" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#solution-to-all-challenges"><i class="fa fa-check"></i><b>4.2.11</b> Solution to all challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html"><i class="fa fa-check"></i><b>5</b> Introduction to data visualization in <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="5.1" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html#general-information-about-ggplot"><i class="fa fa-check"></i><b>5.1</b> General information about <strong>GGPLOT</strong></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html#package-needed-for-the-analysis"><i class="fa fa-check"></i><b>5.1.1</b> Package needed for the analysis</a></li>
<li class="chapter" data-level="5.1.2" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html#be-patient-with-r-and-yourself-its-not-magic-but-rather-work"><i class="fa fa-check"></i><b>5.1.2</b> Be Patient with R and yourself, its not magic but rather work</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html#make-your-first-graph"><i class="fa fa-check"></i><b>5.2</b> Make your first Graph</a></li>
<li class="chapter" data-level="5.3" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html#geom_point"><i class="fa fa-check"></i><b>5.3</b> <code>geom_point</code></a></li>
<li class="chapter" data-level="5.4" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-1"><i class="fa fa-check"></i><b>5.4</b> Challenge 1</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html#geom_boxplot"><i class="fa fa-check"></i><b>5.4.1</b> <code>geom_boxplot</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html#facet_wrap"><i class="fa fa-check"></i><b>5.4.2</b> <code>facet_wrap</code></a></li>
<li class="chapter" data-level="5.4.3" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html#reverse-the-condition-logic"><i class="fa fa-check"></i><b>5.4.3</b> Reverse the condition logic</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html#challenge2"><i class="fa fa-check"></i><b>5.5</b> Challenge2</a></li>
<li class="chapter" data-level="5.6" data-path="introduction-to-data-visualization-in-ggplot2.html"><a href="introduction-to-data-visualization-in-ggplot2.html#challenge3"><i class="fa fa-check"></i><b>5.6</b> Challenge3</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="introduction-to-linear-models-in-r.html"><a href="introduction-to-linear-models-in-r.html"><i class="fa fa-check"></i><b>6</b> Introduction to linear models in R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="introduction-to-linear-models-in-r.html"><a href="introduction-to-linear-models-in-r.html#model-assumptions"><i class="fa fa-check"></i><b>6.1</b> Model Assumptions</a></li>
<li class="chapter" data-level="6.2" data-path="introduction-to-linear-models-in-r.html"><a href="introduction-to-linear-models-in-r.html#linear-model"><i class="fa fa-check"></i><b>6.2</b> Linear model</a></li>
<li class="chapter" data-level="6.3" data-path="introduction-to-linear-models-in-r.html"><a href="introduction-to-linear-models-in-r.html#correlation"><i class="fa fa-check"></i><b>6.3</b> Correlation</a></li>
<li class="chapter" data-level="6.4" data-path="introduction-to-linear-models-in-r.html"><a href="introduction-to-linear-models-in-r.html#statistical-hypothesis"><i class="fa fa-check"></i><b>6.4</b> Statistical Hypothesis</a></li>
<li class="chapter" data-level="6.5" data-path="introduction-to-linear-models-in-r.html"><a href="introduction-to-linear-models-in-r.html#anova"><i class="fa fa-check"></i><b>6.5</b> ANOVA</a></li>
<li class="chapter" data-level="6.6" data-path="introduction-to-linear-models-in-r.html"><a href="introduction-to-linear-models-in-r.html#build-the-model"><i class="fa fa-check"></i><b>6.6</b> <strong>Build the model </strong></a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="introduction-to-linear-models-in-r.html"><a href="introduction-to-linear-models-in-r.html#glm"><i class="fa fa-check"></i><b>6.6.1</b> GLM</a></li>
<li class="chapter" data-level="6.6.2" data-path="introduction-to-linear-models-in-r.html"><a href="introduction-to-linear-models-in-r.html#but-there-are-some-limitations-of-glms-too-such-as"><i class="fa fa-check"></i><b>6.6.2</b> But there are some limitations of GLMs too, such as,</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="functions-in-r.html"><a href="functions-in-r.html"><i class="fa fa-check"></i><b>7</b> Functions in R</a>
<ul>
<li class="chapter" data-level="7.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="functions-in-r.html"><a href="functions-in-r.html#mathematical-operations"><i class="fa fa-check"></i><b>7.1.1</b> Mathematical operations</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="functions-in-r.html"><a href="functions-in-r.html#what-is-an-r-function"><i class="fa fa-check"></i><b>7.2</b> What is an R function?</a></li>
<li class="chapter" data-level="7.3" data-path="functions-in-r.html"><a href="functions-in-r.html#nesting-functions"><i class="fa fa-check"></i><b>7.3</b> Nesting functions</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="functions-in-r.html"><a href="functions-in-r.html#some-basic-built-in-mathematical-functions"><i class="fa fa-check"></i><b>7.3.1</b> Some basic built-in mathematical functions</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="functions-in-r.html"><a href="functions-in-r.html#assigning-variables-within-functions"><i class="fa fa-check"></i><b>7.4</b> Assigning variables within functions</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-1"><i class="fa fa-check"></i><b>7.4.1</b> Challenge 1</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="functions-in-r.html"><a href="functions-in-r.html#using-return"><i class="fa fa-check"></i><b>7.5</b> Using <code>return()</code></a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-2"><i class="fa fa-check"></i><b>7.5.1</b> Challenge 2</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="functions-in-r.html"><a href="functions-in-r.html#solutions-to-challenges"><i class="fa fa-check"></i><b>7.6</b> Solutions to challenges</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-1-1"><i class="fa fa-check"></i><b>7.6.1</b> Challenge 1</a></li>
<li class="chapter" data-level="7.6.2" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-2-1"><i class="fa fa-check"></i><b>7.6.2</b> Challenge 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="loops-and-apply.html"><a href="loops-and-apply.html"><i class="fa fa-check"></i><b>8</b> Loops and <code>apply</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="loops-and-apply.html"><a href="loops-and-apply.html#so-what-do-you-want-to-repeat"><i class="fa fa-check"></i><b>8.2</b> So, what do you want to repeat?</a></li>
<li class="chapter" data-level="8.3" data-path="loops-and-apply.html"><a href="loops-and-apply.html#dont-use-a-loop-when-you-can-use-apply"><i class="fa fa-check"></i><b>8.3</b> DON’T USE A LOOP WHEN YOU CAN USE APPLY!</a></li>
<li class="chapter" data-level="8.4" data-path="loops-and-apply.html"><a href="loops-and-apply.html#the-apply-family"><i class="fa fa-check"></i><b>8.4</b> The <code>apply</code> family</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="loops-and-apply.html"><a href="loops-and-apply.html#sapply"><i class="fa fa-check"></i><b>8.4.1</b> <code>sapply</code></a></li>
<li class="chapter" data-level="8.4.2" data-path="loops-and-apply.html"><a href="loops-and-apply.html#lapply"><i class="fa fa-check"></i><b>8.4.2</b> <code>lapply</code></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="loops-and-apply.html"><a href="loops-and-apply.html#for-loops"><i class="fa fa-check"></i><b>8.5</b> <code>for</code> loops</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="loops-and-apply.html"><a href="loops-and-apply.html#some-for-loop-hints"><i class="fa fa-check"></i><b>8.5.1</b> Some <code>for</code> loop hints</a></li>
<li class="chapter" data-level="8.5.2" data-path="loops-and-apply.html"><a href="loops-and-apply.html#challenge"><i class="fa fa-check"></i><b>8.5.2</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="loops-and-apply.html"><a href="loops-and-apply.html#solutions-to-challenge"><i class="fa fa-check"></i><b>8.6</b> Solutions to challenge</a></li>
<li class="chapter" data-level="8.7" data-path="loops-and-apply.html"><a href="loops-and-apply.html#bonus-changing-plot-labels"><i class="fa fa-check"></i><b>8.7</b> Bonus: Changing plot labels</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html"><i class="fa fa-check"></i><b>9</b> Working with spatial data in <code>R</code></a>
<ul>
<li class="chapter" data-level="9.1" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#transforming-a-dataset-into-an-sf-object"><i class="fa fa-check"></i><b>9.1</b> Transforming a dataset into an <code>sf</code> object</a></li>
<li class="chapter" data-level="9.2" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#loading-shapefiles-into-r-transforming-and-plotting"><i class="fa fa-check"></i><b>9.2</b> Loading shapefiles into <code>R</code>, transforming and plotting</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-1"><i class="fa fa-check"></i><b>9.2.1</b> Challenge 1</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#simple-geometric-operations"><i class="fa fa-check"></i><b>9.3</b> Simple geometric operations</a></li>
<li class="chapter" data-level="9.4" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#making-a-map-using-ggplot2"><i class="fa fa-check"></i><b>9.4</b> Making a map using <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-2"><i class="fa fa-check"></i><b>9.4.1</b> Challenge 2</a></li>
<li class="chapter" data-level="9.4.2" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#pimping-up-you-map"><i class="fa fa-check"></i><b>9.4.2</b> Pimping up you map</a></li>
<li class="chapter" data-level="9.4.3" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-4"><i class="fa fa-check"></i><b>9.4.3</b> Challenge 4</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#some-r-raster-basics"><i class="fa fa-check"></i><b>9.5</b> Some <code>R</code> raster basics</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#croppingmasking"><i class="fa fa-check"></i><b>9.5.1</b> Cropping/Masking</a></li>
<li class="chapter" data-level="9.5.2" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#plotting-and-extracting-data"><i class="fa fa-check"></i><b>9.5.2</b> Plotting and extracting data</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#plotting-rasters-in-ggplot2"><i class="fa fa-check"></i><b>9.6</b> Plotting rasters in <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-4-1"><i class="fa fa-check"></i><b>9.6.1</b> Challenge 4</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#solutions-to-all-challenges"><i class="fa fa-check"></i><b>9.7</b> Solutions to all Challenges</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-1-1"><i class="fa fa-check"></i><b>9.7.1</b> Challenge 1</a></li>
<li class="chapter" data-level="9.7.2" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-2-1"><i class="fa fa-check"></i><b>9.7.2</b> Challenge 2</a></li>
<li class="chapter" data-level="9.7.3" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-3"><i class="fa fa-check"></i><b>9.7.3</b> Challenge 3</a></li>
<li class="chapter" data-level="9.7.4" data-path="working-with-spatial-data-in-r.html"><a href="working-with-spatial-data-in-r.html#challenge-4-2"><i class="fa fa-check"></i><b>9.7.4</b> Challenge 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html"><i class="fa fa-check"></i><b>10</b> Spatial tools for forestry and ecological applications</a>
<ul>
<li class="chapter" data-level="10.1" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#an-introduction-to-processing-lidar-data-in-r"><i class="fa fa-check"></i><b>10.1</b> An introduction to processing LiDAR data in <code>R</code></a></li>
<li class="chapter" data-level="10.2" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#working-with-lidar-data-in-r"><i class="fa fa-check"></i><b>10.2</b> Working with LiDAR data in R</a></li>
<li class="chapter" data-level="10.3" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#step-1.-loading-and-visualizing-pointclouds"><i class="fa fa-check"></i><b>10.3</b> Step 1. Loading and visualizing pointclouds</a></li>
<li class="chapter" data-level="10.4" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#step-2.-computing-a-canopy-height-model"><i class="fa fa-check"></i><b>10.4</b> Step 2. Computing a canopy height model</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#ground-detection-and-normalizing-a-point-cloud"><i class="fa fa-check"></i><b>10.4.1</b> Ground detection and normalizing a point cloud</a></li>
<li class="chapter" data-level="10.4.2" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#building-the-initial-chm"><i class="fa fa-check"></i><b>10.4.2</b> Building the initial CHM</a></li>
<li class="chapter" data-level="10.4.3" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-1"><i class="fa fa-check"></i><b>10.4.3</b> Challenge 1</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#step-3.-individual-tree-segmentation"><i class="fa fa-check"></i><b>10.5</b> Step 3. Individual tree segmentation</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#delineating-the-crowns"><i class="fa fa-check"></i><b>10.5.1</b> Delineating the crowns</a></li>
<li class="chapter" data-level="10.5.2" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-2"><i class="fa fa-check"></i><b>10.5.2</b> Challenge 2</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#additional-analysis-computing-a-digital-terrain-model-dtm"><i class="fa fa-check"></i><b>10.6</b> Additional analysis: Computing a digital terrain model (DTM)</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-3"><i class="fa fa-check"></i><b>10.6.1</b> Challenge 3</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#wrapping-up"><i class="fa fa-check"></i><b>10.7</b> Wrapping up</a></li>
<li class="chapter" data-level="10.8" data-path="spatial-tools-for-forestry-and-ecological-applications.html"><a href="spatial-tools-for-forestry-and-ecological-applications.html#solutions-to-the-challenges"><i class="fa fa-check"></i><b>10.8</b> Solutions to the challenges</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-1-1"><i class="fa fa-check"></i><b>10.8.1</b> Challenge 1</a></li>
<li class="chapter" data-level="10.8.2" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-2-1"><i class="fa fa-check"></i><b>10.8.2</b> Challenge 2</a></li>
<li class="chapter" data-level="10.8.3" data-path="dplyr-a-brief-introduction-to-tidy-data-manipulation.html"><a href="dplyr-a-brief-introduction-to-tidy-data-manipulation.html#challenge-3-1"><i class="fa fa-check"></i><b>10.8.3</b> Challenge 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="extracting-raster-fractions-and-area-using-a-polygon-mask.html"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html"><i class="fa fa-check"></i><b>11</b> Extracting raster fractions and area using a polygon mask</a>
<ul>
<li class="chapter" data-level="11.1" data-path="extracting-raster-fractions-and-area-using-a-polygon-mask.html"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#problem-statement"><i class="fa fa-check"></i><b>11.1</b> Problem statement</a></li>
<li class="chapter" data-level="11.2" data-path="extracting-raster-fractions-and-area-using-a-polygon-mask.html"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#creating-some-dummy-raster-data"><i class="fa fa-check"></i><b>11.2</b> Creating some dummy raster data</a></li>
<li class="chapter" data-level="11.3" data-path="extracting-raster-fractions-and-area-using-a-polygon-mask.html"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#create-some-reserves"><i class="fa fa-check"></i><b>11.3</b> Create some reserves</a></li>
<li class="chapter" data-level="11.4" data-path="extracting-raster-fractions-and-area-using-a-polygon-mask.html"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#extracting-data"><i class="fa fa-check"></i><b>11.4</b> Extracting data</a></li>
<li class="chapter" data-level="11.5" data-path="extracting-raster-fractions-and-area-using-a-polygon-mask.html"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#plotting-the-results"><i class="fa fa-check"></i><b>11.5</b> Plotting the results</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="calculating-class-area-from-raster.html"><a href="calculating-class-area-from-raster.html"><i class="fa fa-check"></i><b>12</b> Calculating class area from raster</a>
<ul>
<li class="chapter" data-level="12.1" data-path="calculating-class-area-from-raster.html"><a href="calculating-class-area-from-raster.html#simple-area-and-area-fraction-calculations-on-a-classified-raster"><i class="fa fa-check"></i><b>12.1</b> Simple area and area fraction calculations on a classified raster</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="introducing-the-koala-dataset.html"><a href="introducing-the-koala-dataset.html#creating-dummy-data"><i class="fa fa-check"></i><b>12.1.1</b> Creating dummy data</a></li>
<li class="chapter" data-level="12.1.2" data-path="calculating-class-area-from-raster.html"><a href="calculating-class-area-from-raster.html#preparing-the-raster-for-area-calculation"><i class="fa fa-check"></i><b>12.1.2</b> Preparing the raster for area calculation</a></li>
<li class="chapter" data-level="12.1.3" data-path="calculating-class-area-from-raster.html"><a href="calculating-class-area-from-raster.html#compiling-a-comprehensive-table"><i class="fa fa-check"></i><b>12.1.3</b> Compiling a comprehensive table</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intro to R for Forest Ecosystem Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="extracting-raster-fractions-and-area-using-a-polygon-mask" class="section level1" number="11">
<h1><span class="header-section-number">Chapter 11</span> Extracting raster fractions and area using a polygon mask</h1>
<div id="problem-statement" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Problem statement</h2>
<p>For this tutorial you will need to load the following packages. Please install if you don’t have them yet.</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb401-1" aria-hidden="true"></a><span class="kw">library</span>(raster)</span>
<span id="cb401-2"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb401-2" aria-hidden="true"></a><span class="kw">library</span>(sf)</span>
<span id="cb401-3"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb401-3" aria-hidden="true"></a><span class="kw">library</span>(exactextractr)</span>
<span id="cb401-4"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb401-4" aria-hidden="true"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<p>Say you have a raster of habitat suitability for a certain species. You could now be interested, how much suitable habitat lies within certain defined areas. For example we could check weather the species is adequately protected by extracting how much suitable area lies within National Parks or other reserves Additionally we can test, how much suitable (and unsuitable) area lies outside the areas you want to test to have an idea of the potential for further protection, or the danger to the species from e.g. land clearing outside of parks. In the end we additionally want to know which fraction of the total area both suitable and unsuitable habitat occupies with our parks, reserves and outside ares.</p>
</div>
<div id="creating-some-dummy-raster-data" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Creating some dummy raster data</h2>
<p>First let’s get a raster to play around with:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb402-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="kw">raster</span>(<span class="dt">ncol=</span><span class="dv">100</span>, <span class="dt">nrow=</span><span class="dv">100</span>, <span class="dt">xmn=</span><span class="op">-</span><span class="dv">10000</span>, <span class="dt">xmx=</span><span class="dv">10000</span>, <span class="dt">ymn=</span><span class="op">-</span><span class="dv">10000</span>, <span class="dt">ymx=</span><span class="dv">10000</span>)</span>
<span id="cb402-2"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb402-2" aria-hidden="true"></a></span>
<span id="cb402-3"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb402-3" aria-hidden="true"></a><span class="kw">res</span>(x)&lt;-<span class="dv">100</span> <span class="co">#make the resolution 100 x 100 meter, so one cell is 1 ha in size</span></span>
<span id="cb402-4"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb402-4" aria-hidden="true"></a></span>
<span id="cb402-5"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb402-5" aria-hidden="true"></a><span class="kw">values</span>(x)&lt;-<span class="kw">runif</span>(<span class="kw">ncell</span>(x)) <span class="co">#populate the raster with random values between 0 - 1</span></span>
<span id="cb402-6"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb402-6" aria-hidden="true"></a></span>
<span id="cb402-7"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb402-7" aria-hidden="true"></a><span class="kw">plot</span>(x)</span></code></pre></div>
<p><img src="10-extracting_raster_fractions_by_mask_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>This raster now contains makeshift values of habitat suitability on a percentage scale. Let’s say we found our cutoff point for suitable habitat at <code>0.5</code>. Any values below this cutoff are then defined as unsuitable for our target species. We can reclassify our raster accordingly:</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb403-1" aria-hidden="true"></a>x_re&lt;-<span class="kw">reclassify</span>(x, <span class="kw">c</span>(<span class="op">-</span><span class="ot">Inf</span>,<span class="fl">0.5</span>,<span class="dv">0</span>,</span>
<span id="cb403-2"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb403-2" aria-hidden="true"></a>                 <span class="fl">0.5</span>,<span class="ot">Inf</span>,<span class="dv">1</span>))</span>
<span id="cb403-3"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb403-3" aria-hidden="true"></a></span>
<span id="cb403-4"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb403-4" aria-hidden="true"></a><span class="kw">plot</span>(x_re)</span></code></pre></div>
<p><img src="10-extracting_raster_fractions_by_mask_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p><code>0</code> now means non suitable and <code>1</code> suitable habitat. Since we randomized our values using <code>runif()</code> we have a equal distribution, meaning that 50% of the area is suitable and 50% of the area is unsuitable. This will help us in double-checking our results later but will probably never occur in real life examples.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb404-1" aria-hidden="true"></a><span class="kw">hist</span>(x)</span></code></pre></div>
<p><img src="10-extracting_raster_fractions_by_mask_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb405-1" aria-hidden="true"></a><span class="kw">barplot</span>(x_re, <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&#39;darkred&#39;</span>,<span class="st">&#39;darkgreen&#39;</span>))</span></code></pre></div>
<p><img src="10-extracting_raster_fractions_by_mask_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
<p>If we wanted to get different probabilities, we could also create our classified raster like this:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb406-1" aria-hidden="true"></a>x_re2 &lt;-<span class="st"> </span><span class="kw">raster</span>(<span class="dt">ncol=</span><span class="dv">100</span>, <span class="dt">nrow=</span><span class="dv">100</span>, <span class="dt">xmn=</span><span class="op">-</span><span class="dv">10000</span>, <span class="dt">xmx=</span><span class="dv">10000</span>, <span class="dt">ymn=</span><span class="op">-</span><span class="dv">10000</span>, <span class="dt">ymx=</span><span class="dv">10000</span>)</span>
<span id="cb406-2"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb406-2" aria-hidden="true"></a></span>
<span id="cb406-3"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb406-3" aria-hidden="true"></a><span class="kw">res</span>(x_re2)&lt;-<span class="dv">100</span></span>
<span id="cb406-4"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb406-4" aria-hidden="true"></a></span>
<span id="cb406-5"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb406-5" aria-hidden="true"></a><span class="kw">values</span>(x_re2)&lt;-<span class="kw">sample</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">1</span>, <span class="kw">ncell</span>(x_re), <span class="dt">replace =</span> T, <span class="dt">prob =</span> <span class="kw">c</span>(<span class="dv">80</span>,<span class="dv">20</span>))</span>
<span id="cb406-6"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb406-6" aria-hidden="true"></a></span>
<span id="cb406-7"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb406-7" aria-hidden="true"></a><span class="kw">plot</span>(x_re2)</span></code></pre></div>
<p><img src="10-extracting_raster_fractions_by_mask_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Using <code>sample()</code> with <code>prob = c(80,20)</code>, assigns 80% of the area as unsuitable, but still on a normal pattern.</p>
</div>
<div id="create-some-reserves" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Create some reserves</h2>
<p>We also needs some reserve areas to extract values from.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb407-1" aria-hidden="true"></a><span class="kw">extent</span>(x_re) <span class="co">#have a look at the extent of our raster to decide for extent of dummy areas</span></span></code></pre></div>
<pre><code>## class      : Extent 
## xmin       : -10000 
## xmax       : 10000 
## ymin       : -10000 
## ymax       : 10000</code></pre>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-1" aria-hidden="true"></a><span class="co">#create some extents</span></span>
<span id="cb409-2"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-2" aria-hidden="true"></a>a&lt;-<span class="kw">extent</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">1000</span>, <span class="dv">1000</span>, <span class="dv">-5233</span>, <span class="dv">-2355</span>))</span>
<span id="cb409-3"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-3" aria-hidden="true"></a>b&lt;-<span class="kw">extent</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">7000</span>, <span class="dv">6530</span>, <span class="dv">-400</span>, <span class="dv">4223</span>))</span>
<span id="cb409-4"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-4" aria-hidden="true"></a>c&lt;-<span class="kw">extent</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">10000</span>, <span class="dv">-5427</span>, <span class="dv">-10000</span>, <span class="dv">-4785</span>))</span>
<span id="cb409-5"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-5" aria-hidden="true"></a></span>
<span id="cb409-6"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-6" aria-hidden="true"></a><span class="co">#transform them into polygons</span></span>
<span id="cb409-7"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-7" aria-hidden="true"></a>a_sf&lt;-<span class="kw">as</span>(a, <span class="st">&#39;SpatialPolygons&#39;</span>)<span class="op">%&gt;%</span><span class="kw">st_as_sf</span>()<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">name =</span> <span class="st">&#39;res1&#39;</span>)  </span>
<span id="cb409-8"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-8" aria-hidden="true"></a>b_sf&lt;-<span class="kw">as</span>(b, <span class="st">&#39;SpatialPolygons&#39;</span>)<span class="op">%&gt;%</span><span class="kw">st_as_sf</span>()<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">name =</span> <span class="st">&#39;res2&#39;</span>)    </span>
<span id="cb409-9"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-9" aria-hidden="true"></a>c_sf&lt;-<span class="kw">as</span>(c, <span class="st">&#39;SpatialPolygons&#39;</span>)<span class="op">%&gt;%</span><span class="kw">st_as_sf</span>()<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">name =</span> <span class="st">&#39;res3&#39;</span>)  </span>
<span id="cb409-10"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-10" aria-hidden="true"></a></span>
<span id="cb409-11"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-11" aria-hidden="true"></a><span class="co">#get the total area to create our outside areas </span></span>
<span id="cb409-12"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-12" aria-hidden="true"></a>all&lt;-<span class="kw">as</span>(<span class="kw">extent</span>(x_re), <span class="st">&#39;SpatialPolygons&#39;</span>)<span class="op">%&gt;%</span><span class="kw">st_as_sf</span>()<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">name =</span> <span class="st">&#39;outside&#39;</span>)  </span>
<span id="cb409-13"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-13" aria-hidden="true"></a></span>
<span id="cb409-14"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-14" aria-hidden="true"></a><span class="kw">plot</span>(x_re)</span>
<span id="cb409-15"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-15" aria-hidden="true"></a><span class="kw">plot</span>(a_sf<span class="op">$</span>geometry, <span class="dt">add =</span> T, <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="dt">border =</span> <span class="st">&#39;red&#39;</span>)</span>
<span id="cb409-16"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-16" aria-hidden="true"></a><span class="kw">plot</span>(b_sf<span class="op">$</span>geometry, <span class="dt">add =</span> T, <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>)</span>
<span id="cb409-17"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb409-17" aria-hidden="true"></a><span class="kw">plot</span>(c_sf<span class="op">$</span>geometry, <span class="dt">add =</span> T, <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="dt">border =</span> <span class="st">&#39;orange&#39;</span>)</span></code></pre></div>
<p><img src="10-extracting_raster_fractions_by_mask_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Now we have three areas that we assume to be our reserves. We still need a polygon for all other areas, also we need to combine our polygons into one.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-1" aria-hidden="true"></a><span class="co">#bind reserves</span></span>
<span id="cb410-2"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-2" aria-hidden="true"></a></span>
<span id="cb410-3"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-3" aria-hidden="true"></a>reserves&lt;-<span class="kw">rbind</span>(a_sf, b_sf, c_sf)</span>
<span id="cb410-4"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-4" aria-hidden="true"></a></span>
<span id="cb410-5"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-5" aria-hidden="true"></a><span class="co">#get the outside areas only</span></span>
<span id="cb410-6"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-6" aria-hidden="true"></a></span>
<span id="cb410-7"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-7" aria-hidden="true"></a>outside&lt;-<span class="kw">st_difference</span>(all, <span class="kw">st_combine</span>(reserves))</span>
<span id="cb410-8"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-8" aria-hidden="true"></a></span>
<span id="cb410-9"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-9" aria-hidden="true"></a><span class="co">#bind all for extraction</span></span>
<span id="cb410-10"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-10" aria-hidden="true"></a></span>
<span id="cb410-11"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-11" aria-hidden="true"></a>all_areas&lt;-<span class="kw">rbind</span>(reserves, outside)</span>
<span id="cb410-12"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-12" aria-hidden="true"></a></span>
<span id="cb410-13"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-13" aria-hidden="true"></a><span class="kw">plot</span>(x_re)</span>
<span id="cb410-14"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-14" aria-hidden="true"></a><span class="kw">plot</span>(<span class="kw">st_geometry</span>(outside<span class="op">$</span>geometry), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">lwd =</span> <span class="dv">4</span>, <span class="dt">add =</span> T)</span>
<span id="cb410-15"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-15" aria-hidden="true"></a><span class="kw">plot</span>(<span class="kw">st_geometry</span>(reserves), </span>
<span id="cb410-16"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb410-16" aria-hidden="true"></a>     <span class="dt">border =</span> <span class="kw">as.factor</span>(reserves<span class="op">$</span>name), <span class="dt">lwd =</span> <span class="dv">3</span>, <span class="dt">add =</span>T)</span></code></pre></div>
<p><img src="10-extracting_raster_fractions_by_mask_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>The blue area is all raster area outside of our reserves. Our three reserves are colored in red, black and green.</p>
</div>
<div id="extracting-data" class="section level2" number="11.4">
<h2><span class="header-section-number">11.4</span> Extracting data</h2>
<p>To extract the cell data from each polygon, we use <code>exact_extract</code> from the package <code>exactextractr</code>, which is a quicker alternative to <code>raster::extract</code>. It extracts data from each feature separately in parallel and saves the extracted values into a list.</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb411-1" aria-hidden="true"></a>extract&lt;-<span class="kw">exact_extract</span>(x_re,all_areas, <span class="dt">fun =</span> <span class="ot">NULL</span>)</span></code></pre></div>
<pre><code>## 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |==================                                                    |  25%
  |                                                                            
  |===================================                                   |  50%
  |                                                                            
  |====================================================                  |  75%
  |                                                                            
  |======================================================================| 100%</code></pre>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb413-1" aria-hidden="true"></a><span class="cf">for</span>( i <span class="cf">in</span> <span class="kw">seq_along</span>(extract)){</span>
<span id="cb413-2"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb413-2" aria-hidden="true"></a>  </span>
<span id="cb413-3"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb413-3" aria-hidden="true"></a>  extract[[i]]<span class="op">$</span>ID &lt;-<span class="st"> </span><span class="kw">seq_along</span>(extract)[i]</span>
<span id="cb413-4"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb413-4" aria-hidden="true"></a>}</span></code></pre></div>
<p>In the second step, we assign an ID column to each table in the created list. This will help us in matching the extracted values to the name of the area polygon we extracted from. We convert out list into a table and then add the <code>lc</code> column to assign each value the name of the polygon it belongs to:</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb414-1" aria-hidden="true"></a>extract_table&lt;-dplyr<span class="op">::</span><span class="kw">bind_rows</span>(extract)<span class="op">%&gt;%</span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb414-2"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb414-2" aria-hidden="true"></a></span>
<span id="cb414-3"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb414-3" aria-hidden="true"></a>extract_table<span class="op">$</span>lc &lt;-<span class="st"> </span><span class="kw">as.factor</span>(all_areas<span class="op">$</span>name[extract_table<span class="op">$</span>ID])</span>
<span id="cb414-4"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb414-4" aria-hidden="true"></a></span>
<span id="cb414-5"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb414-5" aria-hidden="true"></a><span class="kw">head</span>(extract_table)</span></code></pre></div>
<pre><code>##   value ID   lc
## 1     0  1 res1
## 2     1  1 res1
## 3     0  1 res1
## 4     1  1 res1
## 5     0  1 res1
## 6     1  1 res1</code></pre>
<p>We can now compile a summary table using <code>dplyr</code> syntax. To calculate the area, we are working with the resolution of the raster and will need to save it as a variable fist.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb416-1" aria-hidden="true"></a>reso&lt;-<span class="kw">res</span>(x_re)[<span class="dv">1</span>]</span>
<span id="cb416-2"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb416-2" aria-hidden="true"></a></span>
<span id="cb416-3"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb416-3" aria-hidden="true"></a>area_habitat&lt;-extract_table<span class="op">%&gt;%</span><span class="kw">group_by</span>(lc, value)<span class="op">%&gt;%</span></span>
<span id="cb416-4"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb416-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">pixelsum =</span> <span class="kw">sum</span>(ID), <span class="dt">areaha =</span> (pixelsum<span class="op">*</span>reso<span class="op">^</span><span class="dv">2</span>)<span class="op">/</span><span class="dv">10000</span>)<span class="op">%&gt;%</span></span>
<span id="cb416-5"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb416-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sumA =</span> <span class="kw">sum</span>(pixelsum), <span class="dt">per =</span> <span class="dv">100</span><span class="op">*</span>pixelsum<span class="op">/</span>sumA)<span class="op">%&gt;%</span><span class="kw">ungroup</span>()<span class="op">%&gt;%</span></span>
<span id="cb416-6"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb416-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sum_all =</span> <span class="kw">sum</span>(pixelsum), <span class="dt">pertotal =</span> <span class="dv">100</span><span class="op">*</span>pixelsum<span class="op">/</span>sum_all)</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;lc&#39; (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb418-1" aria-hidden="true"></a>area_habitat</span></code></pre></div>
<pre><code>## # A tibble: 8 x 8
##   lc      value pixelsum areaha   sumA   per sum_all pertotal
##   &lt;fct&gt;   &lt;dbl&gt;    &lt;int&gt;  &lt;dbl&gt;  &lt;int&gt; &lt;dbl&gt;   &lt;int&gt;    &lt;dbl&gt;
## 1 outside     0    62148  62148 123560  50.3  144258   43.1  
## 2 outside     1    61412  61412 123560  49.7  144258   42.6  
## 3 res1        0      290    290    600  48.3  144258    0.201
## 4 res1        1      310    310    600  51.7  144258    0.215
## 5 res2        0     6354   6354  12784  49.7  144258    4.40 
## 6 res2        1     6430   6430  12784  50.3  144258    4.46 
## 7 res3        0     3759   3759   7314  51.4  144258    2.61 
## 8 res3        1     3555   3555   7314  48.6  144258    2.46</code></pre>
<p>What happens here is, we group by class (<code>lc</code> which refers to our polygon names) as well as value (0 for unsuitable and 1 for suitable habitat). We then tally all pixels using the <code>ID</code> column and calculate the area in ha from the <code>pixelsum</code>. In our case these match because the resolution is already 1 ha (each cell is 100x100 meters). Furthermore we can then tally all pixels to get the total raster area and from that calculate first the percentage of suitable and unsuitable habitat in each polygon and then (by using <code>ungroup()</code>) the fraction of this area compared to the total raster area.</p>
</div>
<div id="plotting-the-results" class="section level2" number="11.5">
<h2><span class="header-section-number">11.5</span> Plotting the results</h2>
<p>Using <code>ggplot2</code> we can then plot these results to better visualize them. The code below will work for any table that is in the format of our <code>area_habitat</code> table above, if you follow the steps of this guide.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-1" aria-hidden="true"></a>bar&lt;-<span class="kw">ggplot</span>(<span class="dt">data =</span> area_habitat, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">reorder</span>(<span class="kw">as.factor</span>(lc), <span class="op">-</span>pixelsum), <span class="dt">y =</span> per, <span class="dt">fill =</span> <span class="kw">as.factor</span>(value)))<span class="op">+</span></span>
<span id="cb420-2"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&#39;identity&#39;</span>, <span class="dt">color =</span> <span class="st">&#39;black&#39;</span>, <span class="dt">position=</span><span class="kw">position_fill</span>(), <span class="dt">show.legend =</span> <span class="ot">FALSE</span>)<span class="op">+</span></span>
<span id="cb420-3"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>percent)<span class="op">+</span></span>
<span id="cb420-4"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span><span class="kw">round</span>(per, <span class="dt">digits =</span> <span class="dv">1</span>)), <span class="dt">check_overlap =</span> <span class="ot">TRUE</span>, <span class="dt">position=</span><span class="kw">position_fill</span>(),</span>
<span id="cb420-5"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-5" aria-hidden="true"></a>            <span class="dt">vjust =</span> <span class="fl">1.2</span>, <span class="dt">color =</span> <span class="st">&#39;black&#39;</span>)<span class="op">+</span></span>
<span id="cb420-6"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme_classic</span>()<span class="op">+</span></span>
<span id="cb420-7"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title.y =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">15</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>),</span>
<span id="cb420-8"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-8" aria-hidden="true"></a>        <span class="dt">axis.title.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">15</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>),</span>
<span id="cb420-9"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-9" aria-hidden="true"></a>        <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">15</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>), </span>
<span id="cb420-10"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-10" aria-hidden="true"></a>        <span class="dt">axis.text.y =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">15</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>))<span class="op">+</span></span>
<span id="cb420-11"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-11" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&#39;Whatever this area is&#39;</span>)<span class="op">+</span></span>
<span id="cb420-12"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&#39;&#39;</span>)<span class="op">+</span></span>
<span id="cb420-13"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-13" aria-hidden="true"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&#39;area percentage&#39;</span>)<span class="op">+</span></span>
<span id="cb420-14"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&#39;Outside&#39;</span>, <span class="st">&#39;Reserve 2&#39;</span>, <span class="st">&#39;Reserve 3&#39;</span>, <span class="st">&#39;Reserve 1&#39;</span>))<span class="op">+</span></span>
<span id="cb420-15"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-15" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&#39;lightgrey&#39;</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&#39;unsuitable&#39;</span>, <span class="st">&#39;suitable&#39;</span>), <span class="dt">name =</span> <span class="st">&#39;&#39;</span>)</span>
<span id="cb420-16"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-16" aria-hidden="true"></a></span>
<span id="cb420-17"><a href="extracting-raster-fractions-and-area-using-a-polygon-mask.html#cb420-17" aria-hidden="true"></a>bar</span></code></pre></div>
<p><img src="10-extracting_raster_fractions_by_mask_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>Our plot shows for each area we wanted to test, which fraction is suitable and which unsuitable. As expected, in our example we have about a 50:50 distribution, but this may look quite different in a real-world example.</p>
<p>Hope you can find a useful application for this code! :)</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="spatial-tools-for-forestry-and-ecological-applications.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="calculating-class-area-from-raster.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
